mysql_version_major: "5"
mysql_version_minor: "7"

mysql_skip_name_resolve: true
mysql_skip_external_locking: true

# Basic settings
mysql_root_password: "pass"
mysql_port: "3306"
mysql_bind_address: "127.0.0.1"
mysql_language: "/usr/share/mysql/"
mysql_datadir: "/var/lib/mysql"
mysql_socket: "/var/lib/mysql/mysql.sock"
mysql_server_id: 1

# Logs
mysql_log_warnings: 2
mysql_log_error: "/var/log/mysqld.log"
mysql_expire_logs_days: 3
mysql_max_binlog_size: "1G"
mysql_max_binlog_files: 12
mysql_binlog_format: "ROW"

# Fine tuning
mysql_key_buffer: "16M"
mysql_max_allowed_packet: "128M"
mysql_thread_stack: "192K"
mysql_cache_size: "8"
mysql_max_connections: "500"
mysql_table_cache: "64"
mysql_query_cache_type: "0"
mysql_query_cache_limit: "0"
mysql_query_cache_size: "0"
mysql_character_set_server: "utf8"
mysql_collation_server: "utf8_general_ci"
mysql_mysqldump_max_allowed_packet: "128M"
mysql_isamchk_key_buffer: "16M"
mysql_max_connect_errors: "100"
mysql_wait_timeout: "300"


# InnoDB tuning
mysql_innodb_file_per_table: "1"
mysql_innodb_buffer_pool_size: "128M"
mysql_innodb_flush_log_at_trx_commit: "1"
mysql_innodb_lock_wait_timeout: "50"
mysql_innodb_log_buffer_size: "1M"
mysql_innodb_log_file_size: "5M"
mysql_innodb_buffer_pool_dump: true
mysql_innodb_buffer_pool_instances: "2"

mysql_character_set_client_handshake: "FALSE"

replicate_do: []
mysql_databases: []
mysql_users: []

# Cluster settings
mysql_cluster: false
mysql_type: "mysql"
mysql_nodes_group: "mysqlCluster"
mysql_cluster_name: "{{ mysql_nodes_group }}"
mysql_cluster_address: "{{ groups[ mysql_nodes_group ] | map('extract', hostvars, ['ansible_default_ipv4', 'address']) | join(',') }}"
mysql_master_node: "{{ hostvars[ groups[ mysql_nodes_group ][0] ].ansible_default_ipv4.address }}"
mysql_sst_user: "sstuser"
mysql_sst_password: "sstpassword"
mysql_gcs_fc_limit: 32
mysql_wsrep_slave_threads: 8
mysql_wsrep_retry_autocommit: 2
mysql_gcache_size: "2G"
